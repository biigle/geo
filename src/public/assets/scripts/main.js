biigle.geo={},biigle.$viewModel("geo-image-location-panel",function(e){new Vue({el:e,data:{images:[biigle.geo.image]},components:{imageMap:biigle.geo.components.imageMap}})}),biigle.$viewModel("geo-map",function(e){new Vue({el:e,data:{images:biigle.geo.images},components:{imageMap:biigle.geo.components.imageMap}})}),biigle.geo.components={},biigle.geo.components.imageMap={template:'<div class="image-map"></div>',props:{images:{type:Array,required:!0},interactive:{type:Boolean,default:!0},zoom:{type:Number},cluster:{type:Boolean,default:!1}},mounted:function(){for(var e=[],t=this.images.length-1;t>=0;t--)e.push(new ol.Feature({geometry:new ol.geom.Point(ol.proj.fromLonLat([this.images[t].lng,this.images[t].lat]))}));var i=new ol.source.Vector({features:e}),o=i.getExtent();this.cluster&&(i=new ol.source.Cluster({source:i,distance:5}));var a=new ol.Map({target:this.$el,layers:[new ol.layer.Tile({source:new ol.source.OSM}),new ol.layer.Vector({source:i,style:new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:[0,153,255,1]}),stroke:new ol.style.Stroke({color:"white",width:2})})}),updateWhileAnimating:!0,updateWhileInteracting:!0})],view:new ol.View,interactions:ol.interaction.defaults({altShiftDragRotate:!1,doubleClickZoom:this.interactive,keyboard:this.interactive,mouseWheelZoom:this.interactive,shiftDragZoom:this.interactive,dragPan:this.interactive,pinchRotate:!1,pinchZoom:this.interactive}),controls:ol.control.defaults({zoom:this.interactive})});a.getView().fit(o,a.getSize()),this.zoom&&a.getView().setZoom(this.zoom)}};